<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DOOR PRIZE GO GAPLE — Super Glossy HD (Lite)</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800;900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
/* ===== PALET WARNA BARU: SUPER GLOSSY HD ===== */
:root{
--bg:#100525; --panel:#2a1a5e; --panel-2:#1c1044; --ink:#ffffff; --muted:#c0c8ff;
--a:#ffd700; --b:#00c6ff; --c:#00ff7f; --success:#28a745;
--glow-a:0 0 12px rgba(255,215,0,.7), 0 0 24px rgba(255,215,0,.4), 0 0 46px rgba(255,215,0,.25);
--glow-b:0 0 12px rgba(0,198,255,.6), 0 0 24px rgba(0,198,255,.35), 0 0 46px rgba(0,198,255,.2);
--radius:18px;
/* === NEON HIJAU VARIABEL === */
--neon:#39ff14; /* hijau neon utama */
--neon2:#00ff88; /* hijau-ke-cyan untuk glossy grad */
--glow-neon: 0 0 14px rgba(57,255,20,.95), 0 0 26px rgba(57,255,20,.7), 0 0 48px rgba(57,255,20,.45), 0 0 72px rgba(57,255,20,.28);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
margin:0;
background:radial-gradient(1200px 1200px at 10% 0%, #3a2a7b 0%, var(--bg) 42%, #08031a 100%);
color:var(--ink);
font-family:Roboto, system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif;
letter-spacing:.2px;
overflow-x:hidden;
padding-top:58px; padding-bottom:36px
}

/* ===== HEADER ===== */
.site-header{
position:fixed; inset:0 0 auto 0; height:48px;
display:flex; align-items:center; justify-content:space-between; padding:0 14px 0 12px; z-index:20;
background:linear-gradient(90deg, #4a3a8a 0%, #6a4ecf 45%, #8a5fff 100%);
box-shadow:0 2px 10px rgba(0,0,0,.45); border-bottom:1px solid rgba(255,255,255,.12)
}
.site-header .brand{
font-family:Orbitron, sans-serif; font-weight:900; letter-spacing:1px; font-size:14px;
background:linear-gradient(90deg, #fff2ac, #ffd700); -webkit-background-clip:text; background-clip:text; color:transparent;
text-shadow:0 0 6px rgba(255,215,0,.45);
}
.home-btn{
--pad:8px 14px; position:relative; display:inline-flex; align-items:center; gap:8px; padding:var(--pad);
border-radius:12px; border:1px solid rgba(255,255,255,.28);
background:linear-gradient(180deg,#ffea70,#ffd700); color:#3d2500; font-weight:800; font-family:Orbitron; letter-spacing:.5px; text-decoration:none;
box-shadow:0 6px 16px rgba(0,0,0,.4), inset 0 1px 1px rgba(255,255,255,.45), inset 0 0 8px rgba(255,248,220,.28)
}
.home-btn:hover{filter:brightness(1.08)}

/* ===== FOOTER ===== */
.site-footer{
position:fixed; left:0; right:0; bottom:0; height:32px; z-index:18; display:flex; align-items:center; justify-content:center; padding:0 12px;
background:linear-gradient(90deg,#1c1044 0%, #2a1a5e 50%, #3c2a8a 100%);
border-top:1px solid rgba(255,255,255,.1); color:#e0e6ff; font-size:12px
}
.site-footer p{margin:0; opacity:.9; letter-spacing:.2px}

.main-container{
max-width:1200px; margin:8px auto 32px; padding:24px; position:relative; border-radius:var(--radius);
background:linear-gradient(180deg, rgba(42,26,94,.9), rgba(28,16,68,.92));
box-shadow:0 8px 30px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.1), var(--glow-gold);
isolation:isolate; backdrop-filter: blur(4px);
/* Perf: isolate & contain */
contain: content; content-visibility:auto;
}
.main-container::before{
content:""; position:absolute; inset:-2px; z-index:-1; border-radius:calc(var(--radius) + 2px);
background:conic-gradient(from 0deg at 10% 10%, var(--b), var(--a), var(--c), var(--b));
filter:blur(10px) saturate(150%); opacity:.8; mask:linear-gradient(#000 0 0) exclude, linear-gradient(#000 0 0) content-box; padding:2px
}

.title{
margin:6px 6px 18px; text-align:center; font-family:Orbitron, Roboto, sans-serif; font-weight:900; font-size:clamp(24px, 5vw, 48px); letter-spacing:1px;
background:linear-gradient(90deg, var(--a), #ffffff 50%, var(--b)); -webkit-background-clip:text; background-clip:text; color:transparent;
text-shadow:0 0 18px rgba(255,215,0,.55), 0 0 28px rgba(0,198,255,.5)
}

/* ===== LAYOUT ===== */
.main-content{display:grid; grid-template-columns:1.7fr 1fr; gap:18px; align-items:start}
@media (max-width: 1024px){ .main-content{grid-template-columns:1fr} }

.panel, .left-panel{
background:linear-gradient(160deg, var(--panel), var(--panel-2)); border-radius:16px; padding:16px;
box-shadow:inset 0 1px 1px rgba(255,255,255,.12), 0 10px 20px rgba(0,0,0,.5);
content-visibility:auto; contain:paint;
}
.panel h3{margin:0 0 10px; font-family:Orbitron; font-size:1rem; letter-spacing:.8px; color:#f0f8ff; text-shadow:0 0 4px rgba(255,255,255,.18)}

/* === NEON HIJAU SUPER GLOSSY — hanya pinggir kolom (panel kiri & aside) === */
.panel, .left-panel{ position:relative; isolation:isolate; }
/* Tambah glow hijau tanpa mengubah ukuran/posisi */
.panel{ box-shadow:inset 0 1px 1px rgba(255,255,255,.12), 0 10px 20px rgba(0,0,0,.5), var(--glow-neon); }
.left-panel{ box-shadow:inset 0 1px 1px rgba(255,255,255,.12), 0 10px 20px rgba(0,0,0,.5), var(--glow-neon); }
/* Ring tipis super tajam tepat di tepi */
.panel::after, .left-panel::after{
content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
padding:1.5px; /* ketebalan ring, tidak mempengaruhi layout */
background:linear-gradient(180deg, var(--neon), var(--neon2) 60%, var(--neon));
-webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
-webkit-mask-composite: xor; mask-composite: exclude; /* sisakan hanya ring */
filter: drop-shadow(0 0 12px rgba(57,255,20,.9)) drop-shadow(0 0 24px rgba(57,255,20,.65)) drop-shadow(0 0 46px rgba(57,255,20,.4));
opacity:.96; animation: neonPulse 2.8s ease-in-out infinite;
}
@keyframes neonPulse{ 0%,100%{ opacity:.92 } 50%{ opacity:1 } }
@media (prefers-reduced-motion: reduce){ .panel::after, .left-panel::after{ animation:none } }

/* ===== MESIN PAPAN GAPLE ===== */
.board-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px}
.board-title{font-weight:800; letter-spacing:.7px; text-transform:uppercase; font-size:.95rem; color:#fff5e6}

.gaple-board{
position:relative; overflow:hidden; border-radius:18px; height:520px; margin:8px 0 14px;
background:
radial-gradient(140% 100% at 50% 0%, rgba(255,215,0,.12), transparent 60%),
repeating-linear-gradient(0deg, #1a103f 0 6px, #150c35 6px 12px);
box-shadow:inset 0 0 0 1px rgba(255,255,255,.1), inset 0 0 70px rgba(0,0,0,.7);
contain:paint; content-visibility:auto; contain-intrinsic-size: 520px;
}

/* === RAINBOW GLOSSY ORBIT — inside board only === */
/* Base rainbow stays STATIC (no rotation) */
.gaple-board::after{
content:"";
position:absolute;
inset:10px;
border-radius:14px;
z-index:0; /* di bawah grid */
background:
radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,.75) 0%, rgba(255,255,255,0) 40%),
conic-gradient(
from 0deg at 50% 50%,
#ff0000 0%,
#ff7f00 12%,
#ffff00 25%,
#00ff00 37%,
#00ffff 50%,
#0066ff 62%,
#8a00ff 75%,
#ff00ff 87%,
#ff0000 100%
),
radial-gradient(120% 120% at 50% 50%, rgba(0,0,0,0) 60%, rgba(0,0,0,.6) 100%);
filter: brightness(1.05) saturate(1.7) blur(6px);
opacity:.95;
}

/* Rotating glossy LIGHT only (independent of rainbow) */
.gaple-board .spinlight{
position:absolute; inset:10px; border-radius:14px; z-index:0; pointer-events:none;
background:
radial-gradient(36% 36% at 50% 50%, rgba(255,255,255,.6) 0%, rgba(255,255,255,0) 60%),
conic-gradient(from 0deg at 50% 50%, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 44%, rgba(255,255,255,.9) 50%, rgba(255,255,255,0) 56%, rgba(255,255,255,0) 100%);
filter: blur(12px) brightness(1.25) saturate(1.15);
mix-blend-mode: screen;
animation: light-spin 12s linear infinite, light-breath 3s ease-in-out infinite;
}
.gaple-board .spinlight-ccw{
position:absolute; inset:10px; border-radius:14px; z-index:0; pointer-events:none;
background:
radial-gradient(30% 30% at 50% 50%, rgba(255,255,255,.5) 0%, rgba(255,255,255,0) 55%),
conic-gradient(from 20deg at 50% 50%, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 47%, rgba(255,255,255,.85) 50%, rgba(255,255,255,0) 53%, rgba(255,255,255,0) 100%);
filter: blur(12px) brightness(1.2) saturate(1.1);
mix-blend-mode: screen;
animation: light-spin-ccw 16s linear infinite, light-breath 3.2s ease-in-out infinite;
}
@keyframes light-spin{ to{ transform: rotate(360deg); } }
@keyframes light-breath { 0%,100% { opacity:.75 } 50% { opacity:1 } }
@keyframes light-spin-ccw { to { transform: rotate(-360deg); } }

@media (prefers-reduced-motion: reduce){ .gaple-board .spinlight, .gaple-board .spinlight-ccw{ animation:none } }
.gaple-board .rim{position:absolute; inset:8px; border-radius:12px; pointer-events:none;
box-shadow:inset 0 0 0 2px rgba(255,255,255,.1), inset 0 0 0 6px rgba(255,215,0,.14), inset 0 0 36px rgba(255,215,0,.18)}
/* pastikan ring pelangi berada di bawah konten */
.gaple-board .rim, .gaple-board .scan{ z-index:2; }

@keyframes scan { from{transform:translateX(-100%)} to{transform:translateX(100%)} }

.domino-grid{position:relative; z-index:3; display:grid; height:100%; padding:16px; gap:12px;
grid-template-columns:repeat(7, 1fr); grid-template-rows:repeat(4, 1fr)}

/* === DOMINO REAL (flip ber-pip) === */
.domino{position:relative; width:100%; height:100%; perspective:700px; border-radius:12px; cursor:pointer}
.domino .inner{position:absolute; inset:0; transition:transform .55s cubic-bezier(.2,.8,.2,1); transform-style:preserve-3d; will-change:transform; backface-visibility:hidden}
.domino.flipped .inner{transform:rotateY(180deg)}
.face, .back{position:absolute; inset:0; border-radius:12px; box-shadow:inset 0 0 0 1px rgba(0,0,0,.15), 0 10px 18px rgba(0,0,0,.42); backface-visibility:hidden}

.back{
/* Gold glossy rim — match reference */
border:4px solid transparent;
background:
linear-gradient(180deg,#2a1f55,#1c1044) padding-box,
linear-gradient(135deg,#fff6cc 0%, #ffe680 20%, #ffd700 45%, #ffb700 65%, #a86d00 82%, #fff2ac 100%) border-box;
display:grid; place-items:center;
box-shadow:0 0 18px rgba(255,215,0,.38), inset 0 0 0 1px rgba(255,255,255,.1)
}
.back::before{
content:""; position:absolute; inset:3px; border-radius:9px;
background:
linear-gradient(120deg, rgba(255,255,255,.46) 0%, rgba(255,255,255,0) 42%),
radial-gradient(120px 60px at 18% 14%, rgba(255,248,220,.22), rgba(255,248,220,0));
mix-blend:screen; pointer-events:none
}
.back::after{
content:""; position:absolute; left:14px; right:14px; top:12px; bottom:12px; border-radius:10px;
background:
radial-gradient(70% 60% at 50% 32%, rgba(255,255,255,.95) 0%, rgba(255,255,255,0) 55%),
linear-gradient(180deg, #fff6cc 0%, #ffe680 18%, #ffd233 42%, #ffb700 66%, #d08a00 100%);
box-shadow:
inset 0 10px 16px rgba(255,255,255,.6),
inset 0 -12px 18px rgba(168,109,0,.55),
0 0 18px rgba(255,208,0,.42);
}
.face{background:linear-gradient(180deg,#ffffff,#f0f0e0); transform:rotateY(180deg); border:1px solid rgba(0,0,0,.15)}
.face::before{
content:""; position:absolute; inset:0; border-radius:12px;
background:linear-gradient(70deg, rgba(255,255,255,1), rgba(255,255,255,0) 40%); opacity:.55;
transform: translateY(-6px) rotate(8deg); pointer-events:none
}
.divider{position:absolute; left:50%; top:6px; bottom:6px; width:2px; background:linear-gradient(#c8c8b4,#a1a18d); border-radius:2px}
.half{position:absolute; left:6px; right:6px; height:calc(50% - 8px); display:grid; grid-template-columns:repeat(3,1fr); grid-template-rows:repeat(3,1fr); gap:4px; padding:6px}
.half.top{top:6px} .half.bot{bottom:6px}
.pip{
width:12px; height:12px; margin:auto; border-radius:50%;
box-shadow:0 1px 1px rgba(0,0,0,.3), inset 0 1px 1px rgba(255,255,255,.3);
background:radial-gradient(circle at 30% 30%, #ff4747 0%, #e50000 55%, #a00000 100%)
}

.domino.ready .back{ outline:1px solid rgba(255,215,0,.65); box-shadow:0 0 20px rgba(255,215,0,.85), 0 0 38px rgba(255,190,0,.55), 0 0 56px rgba(255,190,0,.35) }
.domino:hover{transform:translateY(-1px)}

/* Shuffle dummy chips */
.shuffle-layer{position:absolute; inset:0; pointer-events:none; z-index:1}
.chip{
position:absolute; width:46px; height:22px; border-radius:6px;
background:linear-gradient(180deg,#2a1a5e,#1c1044);
box-shadow:inset 0 0 0 1px rgba(255,255,255,.12), 0 3px 8px rgba(0,0,0,.6);
opacity:0; animation:shuffle-x .9s ease-in-out infinite, shuffle-pop .2s ease forwards; will-change:transform,opacity
}
.chip::after{content:""; position:absolute; inset:0; border-radius:6px; background:linear-gradient(90deg, rgba(255,255,255,.25), rgba(255,255,255,.04)); mix-blend:overlay}
@keyframes shuffle-x{0%{transform:translateX(-40px) rotate(-6deg)}50%{transform:translateX(40px) rotate(6deg)}100%{transform:translateX(-40px) rotate(-6deg)}}
@keyframes shuffle-pop{to{opacity:.85}}

/* Tombol robotik */
.controls{display:flex; gap:12px; justify-content:center}
.btn{
--pad:12px 20px; position:relative; display:inline-flex; align-items:center; justify-content:center; padding:var(--pad);
border-radius:14px; border:1px solid rgba(255,255,255,.2); cursor:pointer; user-select:none; font-family:Orbitron, Roboto, sans-serif;
font-weight:800; letter-spacing:.7px; text-transform:uppercase; background:linear-gradient(135deg,#2f1a66,#1a0d49); color:#ffffff;
text-shadow:0 1px 1px rgba(0,0,0,.5);
box-shadow:inset 0 1px 1px rgba(255,255,255,.15), 0 12px 24px rgba(0,0,0,.48), 0 0 22px rgba(0,198,255,.22);
transition:transform .12s ease, box-shadow .2s ease; filter:saturate(1.05)
}
.btn.primary{background:linear-gradient(135deg, var(--a), var(--b)); border-color:rgba(255,255,255,.4); color:#000; text-shadow:0 1px 1px rgba(255,255,255,.3)}
.btn::before{content:""; position:absolute; inset:0; border-radius:14px; box-shadow:inset 0 0 0 2px rgba(255,215,0,.28); mix-blend:overlay; opacity:.95; pointer-events:none}
.btn:hover{transform:translateY(-1px); box-shadow:var(--glow-a)}
.btn.primary:hover{box-shadow:var(--glow-a), var(--glow-b)}

/* Kanan: daftar hadiah & result */
.prize-section{padding:10px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03)); box-shadow:inset 0 0 0 1px rgba(255,255,255,.1)}
.prize-item{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px; border-radius:10px; background:linear-gradient(160deg,#2a1a5e,#1c1044); box-shadow:inset 0 1px 0 rgba(255,255,255,.08), 0 2px 5px rgba(0,0,0,.28)}
.badge{font-size:.72rem; padding:4px 8px; border-radius:20px; letter-spacing:.5px; font-weight:700; font-family:Orbitron; box-shadow: inset 0 1px 1px rgba(255,255,255,.28)}
.badge.utama{background:linear-gradient(180deg, #ffd700, #f0c000); color:#4d2c00; border:1px solid #ffde59}
.badge.biasa{background:linear-gradient(180deg, #5bc0de, #46b8da); color:#003366; border:1px solid #7acde6}
.prize-item.highlight{box-shadow:var(--glow-a), var(--glow-b); animation:neon 1.2s ease-in-out infinite}
@keyframes neon{0%,100%{box-shadow:0 0 14px rgba(255,215,0,.7), 0 0 24px rgba(0,198,255,.5)} 50%{box-shadow:0 0 26px rgba(255,215,0,1), 0 0 38px rgba(0,198,255,.75)}}

.prize-result{display:none; margin-top:16px; padding:16px; border-radius:12px; background:linear-gradient(180deg,#2a1a5e,#1c1044); box-shadow:inset 0 0 0 1px rgba(255,255,255,.1)}
.prize-result.show{display:block; animation:up .28s ease}
@keyframes up{from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)}}
.result-actions{display:flex; gap:10px; flex-wrap:wrap}
.btn.claim-wa{border-color:rgba(34,139,34,.6); background:linear-gradient(180deg,#2e8b57,#1e6a3f); color:white}
.btn.claim-wa:hover{box-shadow:0 0 12px #32cd32, 0 0 20px #2e8b57}
.btn.claim-tg{border-color:rgba(30,144,255,.6); background:linear-gradient(180deg,#1e90ff,#104e8b); color:white}
.btn.claim-tg:hover{box-shadow:0 0 12px #1e90ff, 0 0 20px #00bfff}

.tiny{font-size:.8rem; color:#d1d9ff}

@media (max-width: 520px){ .gaple-board{height:460px} .domino-grid{gap:10px; padding:12px} }
@media (prefers-reduced-motion: reduce){
.gaple-board .scan, .domino.ready{animation:none}
}

/* Naikkan posisi panel Hadiah Utama agar lebih dekat ke board */
.hadiah-utama{ margin-top:-105px; }
@media (max-width:1024px){ .hadiah-utama{ margin-top:0; } }

/* ===== ANGKOR WAT EPIC BACKGROUND - GLOSSY SUNRISE (Lite tweaks) ===== */
.angkor-bg{position:fixed; inset:0; z-index:-2; overflow:hidden; background:radial-gradient(1200px 900px at 50% 15%, #4b0082 0%, #191970 45%, #050210 100%); contain:paint}
.angkor-bg .sky{
position:absolute; inset:-15%;
background:linear-gradient(180deg,#ff8c00 0%, #ff4500 35%, #4b0082 65%, #191970 100%);
filter:saturate(1.25) brightness(1.08);
animation:skyPulse 20s ease-in-out infinite; will-change:filter
}
@keyframes skyPulse{0%,100%{filter:saturate(1.15) brightness(1.05)}50%{filter:saturate(1.35) brightness(1.12)}}

.angkor-bg .stars{position:absolute; inset:-10% 0 0 0; background-image:radial-gradient(#fff 1px, transparent 1.2px); background-size:2px 2px; opacity:.2; animation:twinkle 6s ease-in-out infinite}
@keyframes twinkle{0%,100%{opacity:.15}50%{opacity:.25}}

.angkor-bg .sun{
position:absolute; top:8vh; left:-20vw; width:min(36vw,520px); height:min(36vw,520px); border-radius:50%;
background:radial-gradient(circle at 50% 50%, #ffffff 0%, #fffacd 40%, #ffea00 60%, rgba(255,234,0,0) 70%);
filter:blur(7px); opacity:.8; animation:sunGlide 60s linear infinite; will-change:transform
}
@keyframes sunGlide{0%{transform:translate(0,0)}50%{transform:translate(60vw,5vh)}100%{transform:translate(120vw,0)}}

.angkor-bg .cloud{
position:absolute; left:-40%; width:180%; height:52%; bottom:34%; filter:blur(22px); opacity:.3; mix-blend:screen; will-change:transform
}
.angkor-bg .cloud.cloud-1{
background:
radial-gradient(ellipse at 30% 60%, rgba(255,228,181,.23), rgba(255,255,255,0) 60%),
radial-gradient(ellipse at 60% 55%, rgba(255,228,181,.2), rgba(255,255,255,0) 60%);
animation:fogMove 80s linear infinite
}
.angkor-bg .cloud.cloud-2{
bottom:28%; opacity:.25; background:
radial-gradient(ellipse at 40% 60%, rgba(240,248,255,.23), transparent 60%),
radial-gradient(ellipse at 65% 55%, rgba(255,255,255,.18), transparent 60%);
animation:fogMove2 110s linear infinite
}
@keyframes fogMove{from{transform:translateX(0)}to{transform:translateX(40%)}}
@keyframes fogMove2{from{transform:translateX(-10%)}to{transform:translateX(55%)}}

.angkor-bg svg.temples{position:absolute; left:0; right:0; bottom:-2px; height:58%; width:100%; pointer-events:none}
.angkor-bg .layer.far{fill:#191970; opacity:.7; animation:parFar 60s linear infinite; will-change:transform}
.angkor-bg .layer.mid{fill:#100828; opacity:.88; animation:parMid 45s linear infinite; will-change:transform}
.angkor-bg .layer.near{fill:#050210; opacity:1; filter:drop-shadow(0 0 22px rgba(0,0,0,.45)); animation:parNear 35s linear infinite; will-change:transform}
@keyframes parFar{from{transform:translateX(0)}to{transform:translateX(-60px)}}
@keyframes parMid{from{transform:translateX(0)}to{transform:translateX(-120px)}}
@keyframes parNear{from{transform:translateX(0)}to{transform:translateX(-200px)}}

.angkor-bg .bird{ position:absolute; top:12vh; left:-10vw; width:28px; height:12px; opacity:.9; animation:fly 28s linear infinite; will-change:transform }
.angkor-bg .bird:nth-child(odd){animation-duration:32s; top:16vh}
.angkor-bg .bird::before,.angkor-bg .bird::after{ content:""; position:absolute; width:14px; height:10px; border:2px solid rgba(255,255,255,1); border-top:none; border-left:none; transform-origin:left center; border-radius:0 0 100% 0; top:1px; left:6px; filter:drop-shadow(0 0 5px rgba(255,255,255,.5)) }
.angkor-bg .bird::after{left:auto; right:6px; transform-origin:right center; border-left:2px solid rgba(255,255,255,1); border-right:none; border-radius:0 0 0 100%}
@keyframes fly{from{transform:translateX(0) translateY(0)}to{transform:translateX(120vw) translateY(8vh)}}

/* === WATER & REFLECTION === */
.water{position:absolute; left:0; right:0; bottom:0; height:34%; pointer-events:none; overflow:hidden}
.water .surface{
position:absolute; inset:0;
background:
linear-gradient(180deg, rgba(255,100,0,.33) 0%, rgba(138,43,226,.52) 40%, rgba(48,25,52,.88) 100%),
repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0 2px, rgba(255,255,255,0) 2px 8px);
mix-blend:color-dodge; opacity:.7; animation:waterMove 12s linear infinite; will-change:background-position
}
@keyframes waterMove{from{background-position:0 0, 0 0}to{background-position:0 0, 0 40px}}
.water svg.reflection{position:absolute; left:0; right:0; bottom:0; height:120%; width:100%; opacity:.5; transform:scaleY(-1) translateY(12%); filter:blur(2px) saturate(128%)}
.water .mask{position:absolute; left:0; right:0; bottom:0; height:100%; background:linear-gradient(180deg, rgba(5,2,16,0) 0%, rgba(5,2,16,.35) 45%, rgba(5,2,16,.8) 100%)}
.water .ripples{position:absolute; left:-50%; width:200%; height:60%; bottom:10%; opacity:.33; background:radial-gradient(40% 80% at 50% 60%, rgba(255,255,255,.23), rgba(255,255,255,0) 60%) no-repeat; animation:ripples 10s ease-in-out infinite; will-change:transform}
@keyframes ripples{0%,100%{transform:translateX(0)}50%{transform:translateX(10%)}}

/* Fireworks canvas */
#fxFireworks{position:fixed; inset:0; z-index:5; pointer-events:none; mix-blend-mode:lighter}
/* === GOLD SUPER GLOSSY EDGE for main container === */
:root{ --gold:#ffd700; --gold2:#fff7cc; --gold3:#ffb700; --glow-gold: 0 0 18px rgba(255,215,0,.9), 0 0 36px rgba(255,215,0,.6), 0 0 64px rgba(255,200,0,.4); }
.main-container::after{
content:""; position:absolute; inset:0; border-radius:var(--radius); pointer-events:none;
padding:2px;
background:
radial-gradient(220px 160px at 92% 8%, rgba(255,255,255,.9), rgba(255,255,255,0) 60%),
linear-gradient(135deg, var(--gold2) 0%, var(--gold) 35%, var(--gold3) 70%, #a86d00 100%);
-webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
-webkit-mask-composite: xor; mask-composite: exclude; /* sisakan ring saja */
filter: drop-shadow(0 0 18px rgba(255,215,0,.95)) drop-shadow(0 0 36px rgba(255,215,0,.65)) drop-shadow(0 0 64px rgba(255,200,0,.42));
opacity:.98; animation: goldBreath 2.6s ease-in-out infinite;
}
@keyframes goldBreath{ 0%,100%{ opacity:.92 } 50%{ opacity:1 } }
</style>
</head>
<body>
<canvas id="fxFireworks" aria-hidden="true"></canvas>

<header class="site-header">
<div class="brand">BELEGENDTBET</div>
<a id="goHome" class="home-btn" href="index.html">Beranda</a>
</header>

<div class="angkor-bg" aria-hidden="true">
<div class="sky" id="angkor-sky"></div>
<div class="stars"></div>
<div class="sun"></div>
<div class="cloud cloud-1"></div>
<div class="cloud cloud-2"></div>

<svg class="temples" viewBox="0 0 1200 500" preserveAspectRatio="xMidYMax slice">
<g class="layer far">
<path d="M0,500 L0,420 L90,420 L120,370 L150,420 L240,420 L270,360 L300,420 L390,420 L420,340 L450,420 L540,420 L570,370 L600,420 L690,420 L720,360 L750,420 L840,420 L870,340 L900,420 L990,420 L1020,370 L1050,420 L1200,420 L1200,500 Z"/>
</g>
<g class="layer mid">
<path d="M0,500 L0,440 L80,440 L115,380 L150,440 L235,440 L270,360 L305,440 L390,440 L430,320 L470,440 L555,440 L590,380 L625,440 L710,440 L745,360 L780,440 L865,440 L900,325 L935,440 L1020,440 L1055,380 L1090,440 L1200,440 L1200,500 Z"/>
</g>
<g class="layer near">
<path d="M0,500 L0,460 L70,460 L110,395 L150,460 L230,460 L270,375 L310,460 L390,460 L440,330 L490,460 L570,460 L615,395 L660,460 L740,460 L780,375 L820,460 L900,460 L945,335 L990,460 L1070,460 L1110,395 L1150,460 L1200,460 L1200,500 Z"/>
</g>
</svg>

<div class="water">
<svg class="reflection" viewBox="0 0 1200 500" preserveAspectRatio="xMidYMax slice">
<g class="layer far"><path d="M0,500 L0,420 L90,420 L120,370 L150,420 L240,420 L270,360 L300,420 L390,420 L420,340 L450,420 L540,420 L570,370 L600,420 L690,420 L720,360 L750,420 L840,420 L870,340 L900,420 L990,420 L1020,370 L1050,420 L1200,420 L1200,500 Z"/></g>
<g class="layer mid"><path d="M0,500 L0,440 L80,440 L115,380 L150,440 L235,440 L270,360 L305,440 L390,440 L430,320 L470,440 L555,440 L590,380 L625,440 L710,440 L745,360 L780,440 L865,440 L900,325 L935,440 L1020,440 L1055,380 L1090,440 L1200,440 L1200,500 Z"/></g>
<g class="layer near"><path d="M0,500 L0,460 L70,460 L110,395 L150,460 L230,460 L270,375 L310,460 L390,460 L440,330 L490,460 L570,460 L615,395 L660,460 L740,460 L780,375 L820,460 L900,460 L945,335 L990,460 L1070,460 L1110,395 L1150,460 L1200,460 L1200,500 Z"/></g>
</svg>
<div class="surface"></div>
<div class="ripples"></div>
<div class="mask"></div>
</div>
</div>

<div class="main-container" id="app">
<h1 class="title">DOOR PRIZE GO GAPLE</h1>
<div class="main-content">
<section class="left-panel">
<div class="board-head">
<div class="board-title">PAPAN GO GAPLE</div>
<div class="tiny" id="hint"></div>
</div>
<div class="gaple-board" id="board">
<div class="rim"></div>
<div class="scan"></div>
</div>
<div class="controls">
<button class="btn primary" id="btnStart">PUTAR GO GAPLE</button>
</div>
</section>

<aside class="panel">
<h3>HADIAH BIASA</h3>
<div id="list-biasa" style="display:grid; gap:8px"></div>
</aside>

<aside class="panel hadiah-utama">
<h3>HADIAH UTAMA</h3>
<div id="list-utama" style="display:grid; gap:8px"></div>
</aside>

<aside class="panel">
<h3>SELAMAT! DAPAT HADIAH</h3>
<div class="prize-result" id="result">
<div class="tiny" style="margin-bottom:6px">Hasil undian:</div>
<p class="msg" id="resultMsg">—</p>
<div class="result-actions">
<a class="btn claim-wa" id="claimWA" target="_blank" rel="noopener">CLAIM HADIAH WA</a>
<a class="btn claim-tg" id="claimTG" target="_blank" rel="noopener">CLAIM HADIAH TELEGRAM</a>
</div>
<p class="tiny" id="footnote" style="margin-top:8px">Kode klaim: —</p>
</div>
</aside>
</div>
</div>

<footer class="site-footer">
<p>© 2024 BELEGENDBET. Hak Cipta Dilindungi Undang-Undang.</p>
</footer>

<script>
/* ========== CONFIG & DATA ========== */
const BRAND = "DOOR PRIZE GAPLE";
const DEST_WA = "https://klikblg.com/wa-blb";
const DEST_TG = "https://t.me/asupanfreebet";
const MEMBER_LOW_ONLY = true; // hanya 1–8 & tanpa balak

// 28 kartu domino (a<=b)
const DECK = (()=>{ const arr=[]; let id=0; for(let a=0;a<=6;a++){ for(let b=a;b<=6;b++){ arr.push({id:++id, a, b, total:a+b, balak:a===b}); } } return arr; })();

// Hadiah sesuai konsep
const normalPrize = (t)=> t*1000;                // total 1..11
const balakBase  = (t)=> (t===0?1000:t*1000);    // 0=>1.000
const balakBig   = (t)=> balakBase(t)*100;       // x100 (100rb..1,2jt)

/* ========== PRIZE LIST RENDER (lebih hemat DOM ops) ========== */
const listUtama = document.getElementById('list-utama');
const listBiasa = document.getElementById('list-biasa');
(function renderPrizeLists(){
const fmt = (n)=> n.toLocaleString('id-ID');
const fragB = document.createDocumentFragment();
const fragU = document.createDocumentFragment();
for(let t=1;t<=11;t++){
const el=document.createElement('div');
el.className='prize-item'; el.dataset.key='TOTAL-'+t;
el.innerHTML = `<div><strong>Total Titik ${t}</strong><div class="tiny">Hadiah: Rp${fmt(normalPrize(t))}</div></div><div class="badge biasa">BIASA</div>`;
fragB.appendChild(el);
}
for(let n=0;n<=6;n++){
const tot=n*2, el=document.createElement('div'); el.className='prize-item'; el.dataset.key='BALAK-'+n;
el.innerHTML = `<div><strong>Balak ${n} (${n}/${n})</strong><div class="tiny">BIG PRIZE: Rp${fmt(balakBig(tot))}</div></div><div class="badge utama">UTAMA</div>`;
fragU.appendChild(el);
}
listBiasa.appendChild(fragB); listUtama.appendChild(fragU);
})();

/* ========== BACKGROUND HELPERS (hindari node dobel burung) ========== */
(function spawnBirds(n=6){
const bg=document.querySelector('.angkor-bg');
const frag=document.createDocumentFragment();
for(let i=0;i<n;i++){
const b=document.createElement('div'); b.className='bird';
b.style.top = (10 + Math.random()*18) + 'vh';
b.style.animationDuration = (24 + Math.random()*14) + 's';
b.style.animationDelay = (Math.random()*12).toFixed(2) + 's';
frag.appendChild(b);
}
bg.appendChild(frag);
})();

/* ========== FIREWORKS (sedikit lebih hemat partikel) ========== */
const FX = (function(){
const cvs = document.getElementById('fxFireworks');
const ctx = cvs.getContext('2d', { alpha:true });
let W,H, raf=null; const particles=[]; const GRAV=0.05; const FRICTION=0.985;
const DPR = Math.min(1.5, window.devicePixelRatio||1); // cap DPR utk hemat GPU
function resize(){ W=innerWidth; H=innerHeight; cvs.width=W*DPR; cvs.height=H*DPR; cvs.style.width=W+'px'; cvs.style.height=H+'px'; ctx.setTransform(DPR,0,0,DPR,0,0); }
// throttle resize repaint
let resizeRAF=null; addEventListener('resize', ()=>{ if(resizeRAF) return; resizeRAF=requestAnimationFrame(()=>{ resize(); resizeRAF=null; }); }, {passive:true});
resize();

function addBurst({x=W*0.5,y=H*0.3,count=100,spread=Math.PI*2,speed=5,hueBase=Math.random()*360}={}){
for(let i=0;i<count;i++){
const a = (i/count)*spread + Math.random()*0.1;
const sp = speed*(0.6 + Math.random()*0.8);
particles.push({x,y,vx:Math.cos(a)*sp,vy:Math.sin(a)*sp,life:60+Math.random()*30,hue:hueBase + (Math.random()*80-40),size:2+Math.random()*2,alpha:1});
}
if(!raf) raf=requestAnimationFrame(tick);
}
function tick(){
ctx.clearRect(0,0,W,H);
if(!particles.length){ raf=null; return; }
ctx.globalCompositeOperation='lighter';
for(let i=particles.length-1;i>=0;i--){
const p=particles[i];
p.vx*=FRICTION; p.vy*=FRICTION; p.vy+=GRAV; p.x+=p.vx; p.y+=p.vy; p.life--; p.alpha=Math.max(0, p.life/90);
ctx.fillStyle=`hsla(${p.hue},100%,60%,${p.alpha})`;
ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
if(p.life<=0 || p.y>H+20) particles.splice(i,1);
}
raf=requestAnimationFrame(tick);
}
return { burst: (big)=> addBurst({count: big?160:100, speed: big?7:5, hueBase: Math.random()*360}) };
})();

/* ========== BOARD LOGIC ========== */
const board = document.getElementById('board');
const btnStart = document.getElementById('btnStart');
const hint = document.getElementById('hint');
const resultBox = document.getElementById('result');
const resultMsg = document.getElementById('resultMsg');
const claimWA = document.getElementById('claimWA');
const claimTG = document.getElementById('claimTG');
const footnote = document.getElementById('footnote');

let lockPick=false; let chosen=null;

function clearHighlights(){
document.querySelectorAll('.prize-item.highlight').forEach(el=>el.classList.remove('highlight'));
}

function makeShuffle(){
board.innerHTML = '<div class="rim"></div><div class="spinlight" aria-hidden="true"></div><div class="spinlight-ccw" aria-hidden="true"></div><div class="scan"></div>';
const layer = document.createElement('div'); layer.className='shuffle-layer';
const frag = document.createDocumentFragment();
board.appendChild(layer);
const bw = board.clientWidth-46, bh = board.clientHeight-22;
const N = 36; // dari 48 -> 36 (lebih ringan, visual tetap rame)
for(let i=0;i<N;i++){
const c=document.createElement('div'); c.className='chip';
c.style.left=(Math.random()*bw)+'px';
c.style.top=(Math.random()*bh)+'px';
c.style.animationDelay=(Math.random()*0.6).toFixed(2)+'s';
c.style.animationDuration=(0.6+Math.random()*0.9).toFixed(2)+'s';
frag.appendChild(c);
}
layer.appendChild(frag);
hint.textContent = 'Mengacak kartu...';
}

function showGrid(){
board.innerHTML = '<div class="rim"></div><div class="spinlight" aria-hidden="true"></div><div class="spinlight-ccw" aria-hidden="true"></div><div class="scan"></div>';
const grid = document.createElement('div'); grid.className='domino-grid';
const frag = document.createDocumentFragment();
for(let i=0;i<28;i++) frag.appendChild(makeBackDomino());
grid.appendChild(frag); board.appendChild(grid);
hint.textContent='PILIH 1 GAPLE';
}

function makeBackDomino(){
const root = document.createElement('div'); root.className='domino ready';
const inner = document.createElement('div'); inner.className='inner'; root.appendChild(inner);
const back = document.createElement('div'); back.className='back'; inner.appendChild(back);
const face = document.createElement('div'); face.className='face'; inner.appendChild(face);
const divv = document.createElement('div'); divv.className='divider'; face.appendChild(divv);
const top = document.createElement('div'); top.className='half top'; face.appendChild(top);
const bot = document.createElement('div'); bot.className='half bot'; face.appendChild(bot);
root.addEventListener('click', ()=> onPick(root, top, bot), {passive:true});
return root;
}

function onPick(cardEl, topHalf, botHalf){
	if(lockPick) return; lockPick=true;
	document.querySelectorAll('.domino').forEach(n=>{ n.classList.remove('ready'); n.style.pointerEvents='none'; });

	// Pool RNG (sesuai mode member)
	const pool = DECK.filter(t=> MEMBER_LOW_ONLY ? (!t.balak && t.total>=1 && t.total<=8) : true);
	chosen = pool[Math.floor(Math.random()*pool.length)];

	// Tampilkan pip & flip
	drawHalf(topHalf, chosen.a); drawHalf(botHalf, chosen.b);
	cardEl.classList.add('flipped');

	// Highlight daftar hadiah
	clearHighlights();
	const key = chosen.balak ? ('BALAK-'+chosen.a) : ('TOTAL-'+chosen.total);
	const target = document.querySelector('.prize-item[data-key="'+key+'"]');
	if(target){ target.classList.add('highlight'); target.scrollIntoView({behavior:'smooth', block:'center'}); }

	// Hitung hadiah
	const base = chosen.balak ? balakBase(chosen.total) : normalPrize(chosen.total);
	const payout = chosen.balak ? balakBig(chosen.total) : base;
	const label = chosen.balak ? ('BALAK '+chosen.a+' ('+chosen.a+'/'+chosen.b+') — BIG PRIZE') : (chosen.a+'/'+chosen.b+' (Total '+chosen.total+')');

	// Tampilkan hasil + tautan klaim
	const code = makeCode();
	resultMsg.innerHTML = 'Kamu membuka <strong>'+label+'</strong>.<br>Hadiah: <strong>Rp'+payout.toLocaleString('id-ID')+'</strong>';
	footnote.textContent = 'Kode klaim: '+code;
	const msg = 'Halo Admin, saya memenangkan '+label+' senilai Rp'+payout.toLocaleString('id-ID')+' di '+BRAND+'. Kode: '+code;
	claimWA.href = makeWA(msg); claimTG.href = makeTG(msg);
	resultBox.classList.add('show');

	// Efek kemenangan
	confetti(board, chosen.balak?120:60);
	FX.burst(!!chosen.balak);

	// --- Integrasi pencatatan hadiah ke Google Sheet ---
	try {
		const s = JSON.parse(localStorage.getItem('tm_session')||'null');
		if (!s?.userId || !s?.kupon) {
			hint.textContent = 'Session tidak valid. Silakan login ulang.';
			btnStart.disabled = true;
			return;
		}
		const apiUrl = 'https://script.google.com/macros/s/AKfycbyRl2BqiDPw75fQ-XYyL87eKDwHMr61eY0Cg7ra1vc36OMOFZ3IRY_QeZcLFDzFFM88/exec';
		fetch(`${apiUrl}?action=catat&userid=${encodeURIComponent(s.userId)}&kupon=${encodeURIComponent(s.kupon)}&hadiah=${encodeURIComponent(payout)}`)
			.then(res => res.json())
			.then(data => {
				if (data.success) {
					hint.textContent = 'Hadiah sudah dicatat!';
				} else {
					hint.textContent = data.msg || 'Gagal mencatat hadiah!';
				}
				btnStart.disabled = true;
			})
			.catch(() => {
				hint.textContent = 'Gagal menghubungi server. Coba lagi.';
				btnStart.disabled = true;
			});
	} catch {
		hint.textContent = 'Session error.';
		btnStart.disabled = true;
	}
}

/* ===== PIP LAYOUT (cache posisi & layout biar gak bikin objek berulang) ===== */
const POS = { TL:[0,0], TC:[1,0], TR:[2,0], CL:[0,1], CC:[1,1], CR:[2,1], BL:[0,2], BC:[1,2], BR:[2,2] };
const LAYOUTS = {
0:[], 1:['CC'], 2:['TL','BR'], 3:['TL','CC','BR'],
4:['TL','TR','BL','BR'], 5:['TL','TR','CC','BL','BR'], 6:['TL','TR','CL','CR','BL','BR']
};
function drawHalf(container, n){
container.innerHTML='';
const keys = LAYOUTS[n];
for(let i=0;i<keys.length;i++){
const key = keys[i], p=document.createElement('span'); p.className='pip';
p.style.gridColumnStart=POS[key][0]+1; p.style.gridRowStart=POS[key][1]+1;
container.appendChild(p);
}
}

/* ===== UTIL ===== */
function makeCode(){ const s='ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; let r=''; for(let i=0;i<6;i++) r+= s[Math.floor(Math.random()*s.length)]; return r; }
function makeWA(){ return DEST_WA; } // tetap simple sesuai instruksi link langsung
function makeTG(){ return DEST_TG; }

// confetti: satu kali jatuh + auto cleanup (tidak numpuk)
function confetti(container, count=40){
const max=count|0;
for(let i=0;i<max;i++){
const f=document.createElement('i');
f.style.position='absolute';
f.style.left=Math.random()*100+'%';
f.style.top='-10px';
f.style.width='6px'; f.style.height='10px'; f.style.borderRadius='2px';
f.style.background='hsl('+(Math.random()*360)+',90%,65%)';
f.style.transform='rotate('+(Math.random()*180)+'deg)';
const dur = 2+Math.random()*2;
const delay = Math.random()*2;
f.style.animation=`fall ${dur}s ${delay}s linear 1 both`;
f.addEventListener('animationend', ()=> f.remove(), {once:true});
container.appendChild(f);
}
// inject keyframes sekali saja
if(!document.getElementById('confetti-anim')){
const anim = document.createElement('style'); anim.id='confetti-anim';
anim.textContent='@keyframes fall{to{transform:translateY(120vh) rotate(720deg); opacity:0;}}';
document.head.appendChild(anim);
}
}

// Init
const btnStartHandler = ()=>{
if(lockPick){ // Reset if game is over
lockPick=false; showGrid(); clearHighlights();
resultBox.classList.remove('show');
return;
}
lockPick=true;
btnStart.disabled=true; hint.textContent='Mengacak kartu...';
makeShuffle();
setTimeout(()=>{
showGrid();
btnStart.disabled=false;
lockPick=false;
}, 2500); // durasi shuffle tetap
};
document.getElementById('btnStart').addEventListener('click', btnStartHandler);

showGrid(); // Start
</script>
</body>
</html>
