<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GEDOR PINTU HOKI â€” Spin Fisik Shuffle</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=Orbitron:wght@600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-1:#090b16; --bg-2:#1a1440; --electric:#27b0ff; --magenta:#ff2ea6; --gold:#ffc94a;
      --lime:#39ff7f; --cyan:#00e7ff; --text:#e9f0ff; --muted:#a9b0c0;
      --glass: rgba(255,255,255,.06); --glass-stroke: rgba(255,255,255,.14);

      /* ==== ukuran & responsif grid pintu (dipaksa 3 kolom) ==== */
      --door-gap: clamp(6px, 1.8vw, 20px);
      --door-min: clamp(86px, 27.5vw, 240px);
      --doors-max-width: min(98vw, 1120px);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(1200px 800px at 70% -10%, #2a1a78 0%, transparent 60%),
        radial-gradient(900px 900px at -10% 120%, #001e3c 0%, transparent 65%),
        linear-gradient(160deg,var(--bg-1),var(--bg-2));
      color:var(--text); font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      overflow-x:hidden;
    }

    /* ===== Layout ===== */
    .container{ max-width:1200px; margin-inline:auto; padding:120px 20px 120px; }
    header{ position:fixed; top:0; left:0; right:0; display:flex; align-items:center; justify-content:space-between; gap:16px; padding:6px 16px; z-index:60; background:linear-gradient(90deg,#0f1830 0%, #252767 48%, #4e2a98 100%); border-bottom:none; }
    header::after{ content:""; position:absolute; left:0; right:0; bottom:0; height:2px; background:linear-gradient(90deg, rgba(0,255,209,0) 0%, #00ffd1 12%, #00b7ff 50%, #00ffd1 88%, rgba(0,255,209,0) 100%); box-shadow:0 0 6px rgba(0,255,209,.55); }
    .brand{ display:flex; align-items:center; gap:12px; font-weight:900; letter-spacing:.06em; text-transform:uppercase; }
    nav{ display:flex; gap:18px; font-weight:800; color:var(--text) }

    .hero{ text-align:center; padding:24px 0 16px; }
    .eyebrow{ font-size:13px; letter-spacing:.28em; text-transform:uppercase; color:var(--muted); opacity:.9 }
    .title{ font-family:Orbitron,Inter,sans-serif; font-weight:800; font-size: clamp(34px, 6vw, 88px); line-height:1.05; margin:8px auto 12px; }
    .title .neon-1{ color:var(--electric); text-shadow: 0 0 12px rgba(39,176,255,.9), 0 0 40px rgba(39,176,255,.45); }
    .title .neon-2{ color:var(--gold); text-shadow: 0 0 14px rgba(255,201,74,.95), 0 0 48px rgba(255,201,74,.55); }
    .subtitle{ color:var(--muted); font-size: clamp(14px, 1.8vw, 18px); margin-bottom:26px; }

    .cta{
      display:inline-flex; align-items:center; gap:12px; padding:14px 22px; font-weight:800; letter-spacing:.04em; border-radius:16px; text-decoration:none; color:var(--text); position:relative; isolation:isolate; background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03)); border:1px solid var(--glass-stroke); box-shadow: inset 0 0 0 1px rgba(255,255,255,.06), 0 10px 30px rgba(0,0,0,.5), 0 0 24px rgba(0,231,255,.16);
      transition: transform .2s ease, box-shadow .2s ease; z-index:70;
    }
    .cta::before{ content:""; position:absolute; inset:-2px; border-radius:inherit; padding:2px; background:linear-gradient(90deg,#27b0ff,#ff2ea6,#ffc94a,#39ff7f); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.9; filter:blur(.5px); pointer-events:none; }
    .cta:hover{ transform: translateY(-2px); box-shadow: inset 0 0 0 1px rgba(255,255,255,.08), 0 12px 40px rgba(0,0,0,.55), 0 0 36px rgba(39,176,255,.26); }
    .cta[aria-disabled="true"]{ opacity:.6; pointer-events:none; }
    .cta .pulse{ position:absolute; inset:0; border-radius:inherit; box-shadow:0 0 0 0 rgba(39,176,255,.55); animation:pulse 2.6s ease-out infinite; }
    @keyframes pulse{ 0%{box-shadow:0 0 0 0 rgba(39,176,255,.55)} 70%{box-shadow:0 0 0 22px rgba(39,176,255,0)} 100%{box-shadow:0 0 0 0 rgba(39,176,255,0)} }

    /* ===== Doors grid (SELALU 3 kolom Ã— 2 baris) ===== */
    .doors{
      display:grid;
      grid-template-columns: repeat(3, minmax(var(--door-min), 1fr));
      gap: var(--door-gap);
      margin-top:36px;
      width: var(--doors-max-width);
      margin-inline:auto;
      padding-inline: clamp(6px, 2.5vw, 20px);
      align-items:start;
    }

    .door{ position:relative; aspect-ratio:3/4; border-radius:20px; padding:0; background:transparent; border:none; overflow:visible; cursor:pointer; transform:translateZ(0); perspective:1200px; isolation:isolate; transition: transform .16s ease, box-shadow .16s ease, filter .16s ease; will-change: transform, filter; contain: layout paint; width:100%; }
    .door:focus-visible{ outline:2px solid var(--electric); outline-offset:2px }
    .door:hover{ transform: translateY(-6px) scale(1.02); box-shadow: 0 10px 30px rgba(0,0,0,.55), 0 0 30px rgba(255,255,255,.04); animation: vibrate .7s infinite linear; }
    .door.highlight{ transform: translateY(-2px) scale(1.01); box-shadow:0 0 0 3px rgba(39,176,255,.75), 0 0 28px rgba(39,176,255,.45); }
    .door.fly{ z-index:5; filter: drop-shadow(0 14px 30px rgba(39,176,255,.25)) brightness(1.03); }
    @keyframes vibrate{ 0%{filter:brightness(1)} 50%{filter:brightness(1.1)} 100%{filter:brightness(1)} }

    /* ===== Pink Door visual ===== */
    .door-pink{ --pink:#ff6faa; --pink-dark:#e85b96; --trim:#e0488a; --knob:#c5e6e6; }
    .door-pink .frame{ position:absolute; inset:10px; border-radius:14px; background:linear-gradient(180deg, var(--pink) 0%, var(--pink-dark) 100%); box-shadow: inset 0 0 0 3px var(--trim), 0 10px 30px rgba(0,0,0,.5); }
    .door-pink .frame::before{ content:""; position:absolute; left:-8px; right:-8px; top:-18px; height:26px; border-radius:8px; background:linear-gradient(180deg, var(--pink) 0%, var(--pink-dark) 100%); box-shadow: inset 0 0 0 3px var(--trim); }
    .door-pink .frame::after{ content:""; position:absolute; left:-10px; right:-10px; bottom:-18px; height:28px; border-radius:10px; background:linear-gradient(180deg, var(--pink) 0%, var(--pink-dark) 100%); box-shadow: inset 0 0 0 3px var(--trim); }
    .door-pink .door-leaf-container{ position:absolute; inset:26px 18px 30px 18px; border-radius:10px; z-index:2; transform-origin:right center; transition: transform .6s cubic-bezier(.2,.85,.25,1); }
    .door-pink.open .door-leaf-container{ transform: perspective(1200px) rotateY(-70deg); }
    .door-pink .leaf{ position:absolute; inset:0; border-radius:10px; background:linear-gradient(180deg, var(--pink) 0%, var(--pink-dark) 100%); box-shadow: inset 0 0 0 3px var(--trim); }
    .door-pink .leaf .side{ position:absolute; top:0; right:-10px; width:10px; height:100%; border-radius:0 10px 10px 0; background:linear-gradient(180deg, #f8b5cc, #f398b9); box-shadow: inset 0 0 0 2px #cf5a92; }
    .door-pink .leaf::after{ content:""; position:absolute; inset:10px; border:2px solid #b9377b; border-radius:6px; opacity:.9; }
    .door-pink .knob{ position:absolute; width:20px; height:20px; border-radius:50%; left:18px; top:50%; transform:translateY(-50%); background:var(--knob); box-shadow: inset 0 0 0 3px #6a8b8b; }
    .door-pink .frame .edge{ position:absolute; top:26px; bottom:30px; right:18px; width:10px; border-radius:0 10px 10px 0; background:linear-gradient(180deg, #f6b0c8, #f29bbd); box-shadow: inset 0 0 0 2px #cf5a92; }

    /* ===== Panel pelangi full (skin-panel) saat terbuka ===== */
    .inside{ position:absolute; inset:26px 18px 30px 18px; border-radius:10px; background:#0a0d25; display:grid; place-items:center; overflow:hidden; z-index:1; }
    .inside.portal.skin-panel::before,
    .inside.portal.skin-panel::after{ display:none; }
    .inside.portal.skin-panel .panel-bg{
      position:absolute; inset:0; border-radius:10px; overflow:hidden;
      background: linear-gradient(135deg,#ff2ea6 0%,#ffb347 30%,#fff06a 48%,#3cff8f 68%,#23d9ff 100%);
      filter: saturate(125%) contrast(105%) brightness(105%);
    }
    .inside.portal.skin-panel .panel-bg::before{
      content:""; position:absolute; inset:10px; border-radius:8px; pointer-events:none;
      background:
        linear-gradient(140deg, rgba(0,0,0,.55) 0 8px, transparent 8px) top left/42% 32% no-repeat,
        linear-gradient(-140deg, rgba(0,0,0,.55) 0 8px, transparent 8px) top right/42% 32% no-repeat,
        linear-gradient(40deg, rgba(0,0,0,.55) 0 8px, transparent 8px) bottom left/42% 32% no-repeat,
        linear-gradient(-40deg, rgba(0,0,0,.55) 0 8px, transparent 8px) bottom right/42% 32% no-repeat,
        radial-gradient(120% 100% at 50% 50%, rgba(0,0,0,0) 55%, rgba(0,0,0,.25) 100%);
      mix-blend-mode:multiply; opacity:.35;
    }
    .inside.portal.skin-panel[data-theme="blue"] .panel-bg{ background: linear-gradient(135deg,#49a3ff 0%, #7fd1ff 30%, #9bfff2 55%, #5bffa8 78%, #2ad1ff 100%); }
    .inside.portal.skin-panel[data-theme="magenta"] .panel-bg{ background: linear-gradient(135deg,#ff2ea6 0%, #ff7bd9 35%, #ffd86b 60%, #ffa63d 85%); }
    .inside.portal.skin-panel[data-theme="lime"] .panel-bg{ background: linear-gradient(135deg,#7bffb6 0%, #e6ff7a 45%, #72ffd9 80%); }

    .prize-card{ position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:8px; padding: clamp(10px, 2.4vw, 16px) clamp(14px, 3vw, 22px); border-radius:16px; background:linear-gradient(180deg, rgba(12,16,28,.82), rgba(8,12,24,.72)); border:1px solid rgba(255,255,255,.12); box-shadow:0 10px 40px rgba(0,0,0,.55), 0 0 36px rgba(39,176,255,.18); backdrop-filter: blur(10px) saturate(120%); }
    .prize-card::before{ content:""; position:absolute; inset:-2px; border-radius:inherit; padding:2px; background:linear-gradient(90deg,#27b0ff,#ff2ea6,#ffc94a,#39ff7f); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.8; filter:blur(.4px); pointer-events:none; }
    .prize-card svg{ width: clamp(44px, 12vw, 72px); height:auto; }
    .prize-card .prize-label{ font-weight:900; }

    /* ===== Modal & Toast ===== */
    .modal{ position:fixed; inset:0; display:none; place-items:center; padding:24px; z-index:1000; background: radial-gradient(1000px 700px at 50% 20%, rgba(0,231,255,.08), rgba(0,0,0,.65)); }
    .modal.show{ display:grid; }
    .modal-card{ width:min(680px, 96vw); border-radius:24px; padding:28px; background:linear-gradient( to bottom right, rgba(20,28,50,.9), rgba(10,12,22,.9) ); border:1px solid rgba(255,255,255,.12); position:relative; box-shadow: 0 30px 120px rgba(0,0,0,.7), 0 0 80px rgba(39,176,255,.35); text-align:center; }
    .modal-card::before{ content:""; position:absolute; inset:-2px; border-radius:inherit; padding:2px; background:linear-gradient(90deg,#27b0ff,#ff2ea6,#ffc94a,#39ff7f); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.9; filter:blur(.5px); pointer-events:none; }
    .modal h2{ font-family:Orbitron,Inter,sans-serif; font-size: clamp(28px, 5vw, 48px); margin:8px 0 6px; }
    .modal .actions{ display:flex; gap:12px; justify-content:center; margin-top:16px; flex-wrap:wrap; }
    .btn{ padding:12px 18px; border-radius:14px; border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.06); color:#fff; font-weight:700; text-decoration:none; cursor:pointer; }
    .btn.primary{ background:linear-gradient(180deg, rgba(39,176,255,.2), rgba(39,176,255,.12)); box-shadow:0 0 24px rgba(39,176,255,.35); }

    .toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:20px; background:rgba(12,16,28,.9); border:1px solid rgba(255,255,255,.12); color:#fff; padding:10px 14px; border-radius:12px; font-weight:700; box-shadow:0 10px 30px rgba(0,0,0,.5); opacity:0; pointer-events:none; transition: opacity .25s, transform .25s; z-index:50; }
    .toast.show{ opacity:1; transform: translateX(-50%) translateY(-6px); }

    .cta-bottom{ display:flex; justify-content:center; margin:36px 0 0; }
    .legal-bottom{ position:fixed; bottom:0; left:0; right:0; text-align:center; font-size:12px; color:var(--muted); z-index:30; padding:10px 12px; background:linear-gradient(180deg, rgba(10,14,28,0), rgba(10,14,28,.78)); border-top:1px solid rgba(255,255,255,.08); }

    /* === Header brand gradient & pill button === */
    .brand span{ background:linear-gradient(90deg,#7ecbff 0%, #c594ff 100%); -webkit-background-clip:text; background-clip:text; color:transparent; letter-spacing:.04em; }
    .nav-btn{ color:#06131b; text-decoration:none; padding:6px 12px; border-radius:12px; background:linear-gradient(180deg,#26e2ff,#00a6ff); box-shadow:inset 0 1px 0 rgba(255,255,255,.35), 0 0 0 1px rgba(0,0,0,.2); font-weight:700; border:none; display:inline-flex; align-items:center; justify-content:center; }
    .nav-btn:hover{ filter:brightness(1.06); }

    /* === Background efek (tetap) === */
    .bg-cone{ position:fixed; inset:-20%; z-index:-1; pointer-events:none;
      background: conic-gradient(from 0deg at 28% 42%,
        #ff2ea6 0deg, #ffa33b 46deg, #fff06a 88deg, #32ff62 130deg, #15e8ff 200deg, #2a52ff 260deg, #ff2ea6 360deg);
      filter: blur(10px) saturate(180%) brightness(130%);
      mix-blend-mode:screen; animation: coneSpin 26s linear infinite; }
    .bg-cone.bg-cone--slow{ opacity:.65; filter: blur(24px) saturate(170%) brightness(140%); animation-duration: 52s; }
    .bg-glow{ position:fixed; inset:0; z-index:-1; pointer-events:none;
      background: radial-gradient(900px 600px at 28% 42%, rgba(255,255,255,.55), rgba(255,255,255,.12) 28%, rgba(255,255,255,0) 60%);
      mix-blend-mode:screen; filter: saturate(200%) brightness(140%); opacity:.9; animation: glowPulse 4.8s ease-in-out infinite; }
    @keyframes coneSpin{ to{ transform: rotate(360deg); } }
    @keyframes glowPulse{ 0%,100%{ opacity:.88 } 50%{ opacity:1 } }

    .bg-cone, .bg-glow{ display:none !important; }
    .bg-waves{ position:fixed; inset:-15%; z-index:-1; pointer-events:none; mix-blend-mode:screen; filter:saturate(200%) brightness(155%); }
    .bg-waves .wave{ position:absolute; inset:-12%; opacity:.9; filter:blur(24px);
      background: linear-gradient(115deg,
        rgba(255,46,166,0.00) 0%, rgba(255,46,166,0.85) 12%,
        rgba(255,163,59,0.90) 26%, rgba(255,240,106,0.95) 38%,
        rgba(60,255,143,0.95) 58%, rgba(21,232,255,0.95) 76%,
        rgba(42,82,255,0.90) 90%, rgba(255,46,166,0.00) 100%);
      background-size:300% 100%;
      animation: waveFlow 18s linear infinite;
    }
    .bg-waves .layer2{ animation-duration:24s; filter:blur(34px); opacity:.75; }
    .bg-waves .layer3{ animation-duration:32s; filter:blur(46px); opacity:.6; }
    .bg-waves .gloss{ position:absolute; inset:-6%;
      background: radial-gradient(1200px 700px at 20% 30%, rgba(255,255,255,.85), rgba(255,255,255,0) 60%);
      filter: blur(18px) brightness(140%); mix-blend-mode:screen; opacity:.95; animation: glossPulse 5.6s ease-in-out infinite; }
    @keyframes waveFlow{ 0%{ transform:translateX(-16%) translateY(-4%); background-position:0% 50%; }
                          50%{ transform:translateX(16%) translateY(4%);  background-position:100% 50%; }
                          100%{ transform:translateX(-16%) translateY(-4%); background-position:0% 50%; } }
    @keyframes glossPulse{ 0%,100%{ opacity:.9 } 50%{ opacity:1 } }

    .bg-fluid{ position:fixed; inset:-8%; z-index:-2; pointer-events:none; opacity:.9; }
    .bg-fluid svg{ width:116vw; height:116vh; display:block; mix-blend-mode:screen; filter:saturate(220%) brightness(165%); }
    .bg-fluid .layer{ position:absolute; inset:0; }

    .bg-waves, .bg-fluid{ display:none !important; }
    @property --gx{ syntax:'<percentage>'; initial-value:0%; inherits:false; }
    @property --gy{ syntax:'<percentage>'; initial-value:90%; inherits:false; }
    .bg-scan{ position:fixed; inset:-5%; z-index:-1; pointer-events:none; mix-blend-mode:screen;
      filter:saturate(190%) brightness(160%);
      --gx:-2%; --gy:-2%;
      background: conic-gradient(from 0deg at var(--gx) var(--gy),
        #ff2ea6 0deg, #ffa33b 60deg, #fff06a 110deg, #32ff62 160deg, #15e8ff 220deg, #2a52ff 280deg, #ff2ea6 360deg);
      animation: scanDiag 12s linear infinite;
    }
    @keyframes scanDiag{ 0%{ --gx:-2%; --gy:-2%; } 50%{ --gx:102%; --gy:102%; } 100%{ --gx:-2%; --gy:-2%; } }
  </style>
</head>
<body>
  <!-- BRIGHT CONIC SCAN -->
  <div class="bg-scan" aria-hidden="true"></div>
  <!-- FLUID WAVES (SVG) -->
  <div class="bg-fluid" aria-hidden="true">
    <svg viewBox="0 0 100 100" preserveAspectRatio="none">
      <defs>
        <linearGradient id="rainbow1" x1="0" y1="0" x2="100" y2="0" gradientUnits="userSpaceOnUse">
          <stop offset="0%" stop-color="#ff2ea6"/>
          <stop offset="22%" stop-color="#ffa33b"/>
          <stop offset="40%" stop-color="#fff06a"/>
          <stop offset="60%" stop-color="#32ff62"/>
          <stop offset="78%" stop-color="#15e8ff"/>
          <stop offset="100%" stop-color="#2a52ff"/>
          <animateTransform attributeName="gradientTransform" type="translate" dur="18s" values="0 0; 100 0; 0 0" repeatCount="indefinite"/>
        </linearGradient>
        <linearGradient id="rainbow2" x1="0" y1="0" x2="100" y2="0" gradientUnits="userSpaceOnUse">
          <stop offset="0%" stop-color="#ff7bd9"/>
          <stop offset="28%" stop-color="#ffd86b"/>
          <stop offset="55%" stop-color="#7dff95"/>
          <stop offset="82%" stop-color="#7fd1ff"/>
          <stop offset="100%" stop-color="#7b7dff"/>
          <animateTransform attributeName="gradientTransform" type="translate" dur="26s" values="0 0; 100 0; 0 0" repeatCount="indefinite"/>
        </linearGradient>
        <filter id="flow1">
          <feTurbulence type="fractalNoise" baseFrequency="0.003 0.002" numOctaves="2" seed="3" result="noise">
            <animate attributeName="baseFrequency" dur="12s" values="0.003 0.002;0.002 0.003;0.0035 0.0015;0.003 0.002" repeatCount="indefinite"/>
          </feTurbulence>
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="22" xChannelSelector="R" yChannelSelector="G">
            <animate attributeName="scale" dur="14s" values="14;28;18;26;14" repeatCount="indefinite"/>
          </feDisplacementMap>
          <feGaussianBlur stdDeviation="0.6"/>
        </filter>
        <filter id="flow2">
          <feTurbulence type="fractalNoise" baseFrequency="0.002 0.003" numOctaves="2" seed="7" result="n2">
            <animate attributeName="baseFrequency" dur="20s" values="0.002 0.003;0.0015 0.0025;0.0025 0.0018;0.002 0.003" repeatCount="indefinite"/>
          </feTurbulence>
          <feDisplacementMap in="SourceGraphic" in2="n2" scale="16" xChannelSelector="G" yChannelSelector="B">
            <animate attributeName="scale" dur="22s" values="10;22;12;18;10" repeatCount="indefinite"/>
          </feDisplacementMap>
          <feGaussianBlur stdDeviation="0.8"/>
        </filter>
      </defs>
      <g filter="url(#flow1)">
        <rect x="-10" y="-10" width="120" height="120" fill="url(#rainbow1)">
          <animate attributeName="x" dur="24s" values="-18;-6;-18" repeatCount="indefinite"/>
        </rect>
      </g>
      <g filter="url(#flow2)" opacity=".8">
        <rect x="-12" y="-12" width="124" height="124" fill="url(#rainbow2)">
          <animate attributeName="y" dur="28s" values="-16;-4;-16" repeatCount="indefinite"/>
        </rect>
      </g>
    </svg>
  </div>
  <!-- SUPER BRIGHT WAVES LAYER (non-rotating) -->
  <div class="bg-waves" aria-hidden="true">
    <div class="wave layer1"></div>
    <div class="wave layer2"></div>
    <div class="wave layer3"></div>
    <div class="gloss"></div>
  </div>

  <div class="container">
    <header>
      <div class="brand" aria-label="Brand"><span>BELEGENDBET</span></div>
      <nav><a href="index.html" class="nav-btn">Beranda</a></nav>
    </header>

    <section class="hero">
      <div class="eyebrow">ðŸ”¥ Event Promosi Eksklusif ðŸ”¥</div>
      <h1 class="title"><span class="neon-1">GEDOR</span> <span class="neon-2">PINTU HOKI</span></h1>
      <p class="subtitle">ðŸŽ¯Pilih pintumu Rebut hadiahnya.ðŸ“ŒðŸ“ŒðŸ“Œ </p>
    </section>

    <section class="doors" id="pintu" aria-label="Galeri Pintu">
      <button class="door door-pink" aria-label="Pintu 1"><div class="frame"><div class="edge"></div><div class="inside"></div><div class="door-leaf-container"><div class="leaf"><span class="knob"></span><span class="side"></span></div></div></div></button>
      <button class="door door-pink" aria-label="Pintu 2"><div class="frame"><div class="edge"></div><div class="inside"></div><div class="door-leaf-container"><div class="leaf"><span class="knob"></span><span class="side"></span></div></div></div></button>
      <button class="door door-pink" aria-label="Pintu 3"><div class="frame"><div class="edge"></div><div class="inside"></div><div class="door-leaf-container"><div class="leaf"><span class="knob"></span><span class="side"></span></div></div></div></button>
      <button class="door door-pink" aria-label="Pintu 4"><div class="frame"><div class="edge"></div><div class="inside"></div><div class="door-leaf-container"><div class="leaf"><span class="knob"></span><span class="side"></span></div></div></div></button>
      <button class="door door-pink" aria-label="Pintu 5"><div class="frame"><div class="edge"></div><div class="inside"></div><div class="door-leaf-container"><div class="leaf"><span class="knob"></span><span class="side"></span></div></div></div></button>
      <button class="door door-pink" aria-label="Pintu 6"><div class="frame"><div class="edge"></div><div class="inside"></div><div class="door-leaf-container"><div class="leaf"><span class="knob"></span><span class="side"></span></div></div></div></button>
    </section>

    <div class="cta-bottom">
      <a class="cta" href="#pintu" role="button" aria-label="Spin Door Prize" id="cta-spin">
        <span class="pulse" aria-hidden="true"></span>ðŸŽ° SPIN DOOR PRIZE
      </a>
    </div>
  </div>

  <footer class="legal-bottom">Â© 2025 BELEGENDBET. Hak Cipta Dilindungi Undang-Undang.</footer>

  <!-- Modal -->
  <div id="winModal" class="modal" aria-hidden="true" role="dialog" aria-label="Hadiah">
    <div class="modal-card">
      <div class="eyebrow">Selamat!</div>
      <h2 id="modalTitle">Anda Mendapat Hadiah</h2>
      <div class="prize-list-container">
        <table style="width:100%; border-collapse:separate; border-spacing:0; font-size:14px; text-align:left;">
          <thead>
            <tr style="background:#3a1a78; color:#fff;">
              <th style="padding:10px 16px;">No</th><th style="padding:10px 16px;">Hadiah</th>
            </tr>
          </thead>
          <tbody id="prizeListTableBody"></tbody>
        </table>
      </div>
      <div id="winMessage" class="eyebrow" style="margin-top:10px;"></div>
      <div class="actions">
        <a class="btn primary" id="claimBtn" href="https://klikblg.com/wa-blb" target="_blank" rel="noopener">CLAIM HADIAH WA</a>
        <a class="btn primary" id="joinTgBtn" href="https://t.me/asupanfreebet" target="_blank" rel="noopener">CLAIM HADIAH TELEGRAM</a>
        <button class="btn" id="playAgainBtn">MAIN LAGI</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">Hampir! Tekan SPIN dulu.</div>

  <script>
  'use strict';

  /* ==== Anti listener dobel (live-edit aman) ==== */
  try{ if (window.__GEDOR_CTRL) window.__GEDOR_CTRL.abort(); }catch(e){}
  const __CTRL = new AbortController(); window.__GEDOR_CTRL = __CTRL;

  /* ==== Elemen ==== */
  const doorsContainer = document.querySelector('.doors');
  const doors = [...document.querySelectorAll('.door')];
  const ctaSpin = document.getElementById('cta-spin');
  const toast = document.getElementById('toast');
  const modal = document.getElementById('winModal');
  const modalTitle = document.getElementById('modalTitle');
  const prizeListTableBody = document.getElementById('prizeListTableBody');
  const winMessageEl = document.getElementById('winMessage');
  const claimBtn = document.getElementById('claimBtn');
  const joinTgBtn = document.getElementById('joinTgBtn');
  const playAgainBtn = document.getElementById('playAgainBtn');
  const DOOR_COUNT = doors.length;

  /* ==== State ==== */
  let selectEnabled = false, spinActive = false, gameLocked = false;

  /* ==== Prize data (untuk daftar modal dan door lain) ==== */
  const prizes = [
    { amount: "Rp 5.000.000" },
    { amount: "Rp 1.000.000" },
    { amount: "Rp 100.000"  },
    { amount: "Rp 20.000"   },
    { amount: "Rp 10.000"   },
    { amount: "Rp 8.000"    },
    { amount: "Rp 5.000"    },
    { amount: "Rp 3.000"    },
    { amount: "Rp 2.000"    }
  ];
  const ALLOWED_AMOUNTS = ['Rp 10.000','Rp 8.000','Rp 5.000','Rp 3.000','Rp 2.000'];
  const allowedSet = new Set(ALLOWED_AMOUNTS);
  const portalThemes = ['blue','magenta','lime','blue','magenta','lime'];

  // mapping hadiah per-door (aman walau DOM diacak)
  const doorPrize = new WeakMap();

  /* ==== Helpers ==== */
  const wait = (ms)=> new Promise(r=>setTimeout(r, ms));
  function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }
  function assignPrizesToDoors(){
    const pick = shuffle([...prizes]).slice(0, DOOR_COUNT);
    doors.forEach((d,i)=> doorPrize.set(d, pick[i]));
  }
  function coerceAllowed(p){
    if(!p || typeof p.amount!=='string' || !allowedSet.has(p.amount)){
      return { amount: ALLOWED_AMOUNTS[Math.floor(Math.random()*ALLOWED_AMOUNTS.length)] };
    }
    return p;
  }
  function showToast(msg){ toast.textContent = msg; toast.classList.add('show'); clearTimeout(showToast.t); showToast.t = setTimeout(() => toast.classList.remove('show'), 1500); }

  /* ==== One-time Spin Lock (per userId+kupon) ==== */
  const SPIN_KEY = (()=>{ 
    try{ 
      const s = JSON.parse(localStorage.getItem('tm_session')||'null'); 
      const uid = s?.userId || 'anon'; 
      const kpn = s?.kupon || 'global'; 
      return `tm_spinlock:${uid}:${kpn}`; 
    }catch(_){ 
      return 'tm_spinlock:global'; 
    } 
  })();
  function hasPlayed(){ try{ return localStorage.getItem(SPIN_KEY)==='1'; }catch(_){ return false; } }
  function markPlayed(){ try{ localStorage.setItem(SPIN_KEY,'1'); }catch(_){ } }

  /* ==== Start/reset game ==== */
  function startGame(){
    if (hasPlayed()){
      lockGame();
      if (modal){ modal.classList.remove('show'); modal.setAttribute('aria-hidden','true'); }
      showToast('Kupon sudah digunakan.');
      return;
    }

    gameLocked = false; selectEnabled = false; spinActive = false;
    assignPrizesToDoors();
    doors.forEach(d=>{
      d.classList.remove('open','highlight','is-picked','fly');
      d.style.transition = ''; d.style.transform='';
      const inside = d.querySelector('.inside');
      inside.className = 'inside'; inside.innerHTML = '';
      inside.removeAttribute('data-theme'); inside.removeAttribute('data-state');
      d.style.pointerEvents = 'auto';
    });
    ctaSpin.style.display='inline-flex';
    ctaSpin.setAttribute('aria-disabled','false');
    if (playAgainBtn) playAgainBtn.style.display='none';
  }
  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', startGame, {once:true, signal: __CTRL.signal});
  } else startGame();

  /* ==== Listeners ==== */
  doors.forEach((door)=>{
    door.addEventListener('click', ()=>{
      if(!selectEnabled || gameLocked){ if(!spinActive) showToast('Tekan SPIN dulu'); return; }
      handleDoorEl(door);
    }, {signal: __CTRL.signal});
  });
  ctaSpin.addEventListener('click', (e)=>{ e.preventDefault(); startSpinShuffle(); }, {signal: __CTRL.signal});

  /* ==== SPIN fisik: muter cepat & acak pindah posisi ==== */
  async function startSpinShuffle(){
    if(spinActive || gameLocked) return;
    markPlayed(); // kunci sekali saat SPIN
    spinActive = true; selectEnabled = false;
    ctaSpin.setAttribute('aria-disabled','true');

    const cycles = 12;
    for (let c = 0; c < cycles; c++){
      const t = c / (cycles - 1);
      const dur = Math.round(70 + t*150);
      await flipOnce(dur, t);
      await wait(10 + t*40);
    }

    spinActive = false; selectEnabled = true;
    ctaSpin.style.display='none';
    ctaSpin.setAttribute('aria-disabled','true');
    showToast('Pilih 1 pintu');
  }

  async function flipOnce(duration, t){
    const first = new Map(); doors.forEach(d=> first.set(d, d.getBoundingClientRect()));
    const order = [...doors]; for(let i=order.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [order[i],order[j]]=[order[j],order[i]]; }
    order.forEach(d=> doorsContainer.appendChild(d));
    const last = new Map(); doors.forEach(d=> last.set(d, d.getBoundingClientRect()));
    doors.forEach(d=>{
      const a = first.get(d), b = last.get(d);
      const dx = a.left - b.left; const dy = a.top - b.top;
      const baseTurns = 3 - 2*t;
      const turns = Math.max(1, Math.round(baseTurns + Math.random()*0.6));
      const dir = Math.random()<.5 ? -1 : 1;
      const tilt = (Math.random()*10 - 5).toFixed(2);
      d.classList.add('fly');
      d.style.willChange='transform';
      d.style.transition = `transform ${duration}ms cubic-bezier(.2,.85,.25,1)`;
      d.style.transform = `translate(${dx}px, ${dy}px) rotate(${tilt}deg) scale(.96)`;
      void doorsContainer.offsetWidth;
      const endRotate = dir * turns * 360;
      d.style.transform = `translate(0,0) rotate(${endRotate}deg) scale(1)`;
    });
    await wait(duration + 30);
    doors.forEach(d=>{
      d.classList.remove('fly');
      d.style.transition=''; d.style.transform=''; d.style.willChange='';
    });
  }

  /* ==== Ambil hadiah dari server ==== */
  async function fetchServerPrize(){
    const s = JSON.parse(localStorage.getItem('tm_session')||'null');
    if (!s?.userId || !s?.kupon) {
      return { ok:false, msg:'Session tidak valid. Silakan login ulang.' };
    }
    function setClaimed(kupon) { if (!kupon) return; localStorage.setItem('tm_claimed_'+kupon, '1'); }
    function isClaimed(kupon) { if (!kupon) return false; return localStorage.getItem('tm_claimed_'+kupon) === '1'; }
    if (isClaimed(s.kupon)) {
      return { ok:false, msg:'Kupon sudah pernah dipakai!' };
    }
    const apiUrl = 'https://script.google.com/macros/s/AKfycbyRl2BqiDPw75fQ-XYyL87eKDwHMr61eY0Cg7ra1vc36OMOFZ3IRY_QeZcLFDzFFM88/exec';
    try{
      const res = await fetch(`${apiUrl}?action=catat&userid=${encodeURIComponent(s.userId)}&kupon=${encodeURIComponent(s.kupon)}&site=BELEGENDBET`);
      const data = await res.json().catch(()=>({success:false, msg:'Response bukan JSON'}));
      if (data.success){
        const hadiahNum = Number(data.hadiah);
        const hadiahStr = hadiahNum ? `Rp ${hadiahNum.toLocaleString('id-ID')}` : '-';
        setClaimed(s.kupon);
        return { ok:true, hadiahNum, hadiahStr };
      }
      return { ok:false, msg:data.msg || 'Gagal mencatat hadiah!' };
    }catch{
      return { ok:false, msg:'Gagal menghubungi server. Coba lagi.' };
    }
  }

  /* ==== Render semua pintu sesuai hadiah server ==== */
  function renderOpenDoors(selectedDoor, hadiahNum, hadiahStr){
    doors.forEach((d,i)=>{
      d.classList.add('open'); d.style.pointerEvents='none';
      const inside = d.querySelector('.inside');
      let amountStr, type;
      if (d===selectedDoor){
        amountStr = hadiahStr;
        type = hadiahNum >= 1000000 ? 'diamond' : (hadiahNum <= 3000 ? 'coin' : 'star');
      } else {
        const chosen = doorPrize.get(d);
        amountStr = chosen?.amount || 'Rp 0';
        if (amountStr.includes('1.000.000') || amountStr.includes('5.000.000')) type='diamond';
        else if (amountStr.includes('2.000')) type='coin';
        else type='star';
      }
      inside.classList.add('portal','skin-panel');
      inside.setAttribute('data-theme', portalThemes[i % portalThemes.length]);
      inside.setAttribute('data-state', d===selectedDoor ? 'selected' : 'showcase');
      inside.innerHTML = `
        <div class="panel-bg"></div>
        <div class="prize-card">
          ${getPrizeSVG(type)}
          <div class="prize-label">${amountStr}</div>
        </div>
      `;
      if(d===selectedDoor) d.classList.add('is-picked'); else d.classList.remove('is-picked');
    });
  }

  /* ==== Klik pintu ==== */
  async function handleDoorEl(selectedDoor){
    if(gameLocked) return;
    gameLocked = true; selectEnabled = false;
    ctaSpin.style.display='none';
    window._lastSelectedDoor = selectedDoor;

    try{ playWhoosh(()=>{}); }catch(_){}

    const result = await fetchServerPrize();
    if (!result.ok){
      showToast(result.msg || 'Gagal mengambil hadiah.');
      lockGame();
      modal.classList.add('show'); modal.setAttribute('aria-hidden','false');
      return;
    }

    const {hadiahNum, hadiahStr} = result;
    renderOpenDoors(selectedDoor, hadiahNum, hadiahStr);

    setTimeout(()=>{
      try{ playChaChing(); }catch(_){}
      modalTitle.textContent = "Anda Mendapat Hadiah";
      winMessageEl.textContent = `Selamat berakah! Kamu mendapatkan ${hadiahStr}`;
      const rows = prizes.map((p,i)=>{
        const pNum = Number((p.amount||'').replace(/[^\d]/g, ''));
        const cls = (pNum===hadiahNum) ? ' style="background:#a6ffff;color:#0a0d25;font-weight:900;"' : '';
        return `<tr${cls}><td style="padding:10px 16px;border-bottom:1px solid #23194a;">${i+1}</td><td style="padding:10px 16px;border-bottom:1px solid #23194a;">${p.amount}</td></tr>`;
      }).join('');
      prizeListTableBody.innerHTML = rows;
      showToast('Hadiah sudah dicatat!');
      lockGame();
      modal.classList.add('show'); modal.setAttribute('aria-hidden','false');
    }, 400);
  }

  // Cek status kupon saat load
  (function(){
    const s = JSON.parse(localStorage.getItem('tm_session')||'null');
    function setClaimed(kupon) { if (!kupon) return; localStorage.setItem('tm_claimed_'+kupon, '1'); }
    function isClaimed(kupon) { if (!kupon) return false; return localStorage.getItem('tm_claimed_'+kupon) === '1'; }
    function lockGame() {
      doors.forEach(d=>d.style.pointerEvents='none');
      if (ctaSpin) { ctaSpin.setAttribute('aria-disabled','true'); ctaSpin.style.display='none'; }
      if (playAgainBtn) playAgainBtn.style.display='none';
    }
    if (isClaimed(s?.kupon)) {
      lockGame();
      showToast('Kupon sudah pernah dipakai!');
    } else if (s?.userId && s?.kupon) {
      const apiUrl = 'https://script.google.com/macros/s/AKfycbyRl2BqiDPw75fQ-XYyL87eKDwHMr61eY0Cg7ra1vc36OMOFZ3IRY_QeZcLFDzFFM88/exec';
      fetch(`${apiUrl}?action=claim&userid=${encodeURIComponent(s.userId)}&kupon=${encodeURIComponent(s.kupon)}&site=BELEGENDBET`)
        .then(res=>res.json())
        .then(data=>{
          if (data.msg && data.msg.toLowerCase().includes('terpakai')) {
            lockGame();
            showToast('Kupon sudah pernah dipakai!');
            setClaimed(s.kupon);
          }
        });
    }
  })();

  function lockGame() {
    doors.forEach(d=>d.style.pointerEvents='none');
    if (ctaSpin) { ctaSpin.setAttribute('aria-disabled','true'); ctaSpin.style.display='none'; }
    if (playAgainBtn) playAgainBtn.style.display='none';
  }

  function getPrizeSVG(type){
    switch(type){
      case 'diamond': return `<svg width="96" height="96" viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg" aria-label="Diamond"><defs><linearGradient id="g1" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#9be9ff"/><stop offset="100%" stop-color="#49c9ff"/></linearGradient></defs><polygon points="12,32 32,12 64,12 84,32 48,84" fill="url(#g1)" stroke="#1aa3e6" stroke-width="3"/></svg>`;
      case 'coin':    return `<svg width="96" height="96" viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg" aria-label="Coin"><defs><radialGradient id="g3" cx="50%" cy="40%" r="60%"><stop offset="0%" stop-color="#fff3a6"/><stop offset="100%" stop-color="#f2b705"/></radialGradient></defs><ellipse cx="48" cy="48" rx="34" ry="28" fill="url(#g3)" stroke="#b58100" stroke-width="3"/></svg>`;
      default:        return `<svg width="96" height="96" viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg" aria-label="Star"><polygon points="48,8 58,36 88,36 62,54 72,84 48,66 24,84 34,54 8,36 38,36" fill="#ffd24f" stroke="#b58100" stroke-width="3"/></svg>`;
    }
  }

  /* ==== Modal actions ==== */
  claimBtn.addEventListener('click', ()=>{ modal.classList.remove('show'); }, {signal: __CTRL.signal});
  joinTgBtn.addEventListener('click', ()=>{ modal.classList.remove('show'); }, {signal: __CTRL.signal});
  playAgainBtn.addEventListener('click', ()=>{ modal.classList.remove('show'); }, {signal: __CTRL.signal});
  modal.addEventListener('click', (e)=>{ if(e.target===modal){ modal.classList.remove('show'); } }, {signal: __CTRL.signal});

  /* ==== Audio ringan ==== */
  let audioCtx;
  function getCtx(){ if(!audioCtx){ audioCtx = new (window.AudioContext || window.webkitAudioContext)(); } if(audioCtx.state === 'suspended') audioCtx.resume(); return audioCtx; }
  window.addEventListener('pointerdown', ()=>{ try{ getCtx(); }catch(e){} }, {once:true, passive:true, signal: __CTRL.signal});

  function playWhoosh(done){
    const ctx = getCtx(); const dur = 0.45;
    const bufferSize = ctx.sampleRate * dur, buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate), data = buffer.getChannelData(0);
    for(let i=0;i<bufferSize;i++) data[i] = Math.random()*2-1;
    const src = ctx.createBufferSource(); src.buffer = buffer;
    const filter = ctx.createBiquadFilter(); filter.type='lowpass'; filter.frequency.setValueAtTime(400, ctx.currentTime); filter.frequency.exponentialRampToValueAtTime(8000, ctx.currentTime + dur);
    const gain = ctx.createGain(); gain.gain.setValueAtTime(0.0001, ctx.currentTime); gain.gain.exponentialRampToValueAtTime(.6, ctx.currentTime+0.05); gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime+dur);
    src.connect(filter).connect(gain).connect(ctx.destination); src.start(); src.onended = ()=> done && done();
  }
  function playChaChing(){
    const ctx = getCtx(); const t0 = ctx.currentTime + 0.02;
    const o1 = ctx.createOscillator(); o1.type='triangle'; const g1 = ctx.createGain(); g1.gain.setValueAtTime(0.0001, t0); g1.gain.exponentialRampToValueAtTime(0.7, t0+0.02); g1.gain.exponentialRampToValueAtTime(0.0001, t0+0.7); o1.frequency.setValueAtTime(1100, t0); o1.frequency.exponentialRampToValueAtTime(1600, t0+0.08);
    const o2 = ctx.createOscillator(); o2.type='square';   const g2 = ctx.createGain(); g2.gain.setValueAtTime(0.0001, t0); g2.gain.exponentialRampToValueAtTime(0.35, t0+0.02); g2.gain.exponentialRampToValueAtTime(0.0001, t0+0.55); o2.frequency.setValueAtTime(660, t0);  o2.frequency.exponentialRampToValueAtTime(990, t0+0.06);
    const nDur=0.09; const b = ctx.createBuffer(1, ctx.sampleRate*nDur, ctx.sampleRate); const d=b.getChannelData(0); for(let i=0;i<d.length;i++) d[i]=Math.random()*2-1;
    const n = ctx.createBufferSource(); n.buffer=b; const ng=ctx.createGain(); ng.gain.setValueAtTime(0.4, t0); ng.gain.exponentialRampToValueAtTime(0.0001, t0+nDur);
    o1.connect(g1).connect(ctx.destination); o2.connect(g2).connect(ctx.destination); n.connect(ng).connect(ctx.destination);
    o1.start(t0); o2.start(t0+0.02); n.start(t0); o1.stop(t0+0.7); o2.stop(t0+0.55); n.stop(t0+nDur);
  }
  </script>
</body>
</html>
